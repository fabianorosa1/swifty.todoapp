{"remainingRequest":"/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/node_modules/babel-loader/lib/index.js!/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/src/components/SignUpForm.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/src/components/SignUpForm.vue","mtime":1536413589398},{"path":"/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/node_modules/babel-loader/lib/index.js","mtime":1526583314000},{"path":"/Users/vporokhov/Desktop/SwiftyCloud/swifty.demo/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as config from '@/config';\nexport default {\n  data: function data() {\n    return {\n      form: {\n        auth_endpoint: null,\n        facebook_endpoint: null,\n        profile_endpoint: null,\n        picture_endpoint: null,\n        tasks_endpoint: null,\n        email: null,\n        city: null,\n        password: null\n      },\n      rules: {\n        auth_endpoint: [{\n          required: true,\n          message: 'Please enter your auth url',\n          trigger: 'blur'\n        }],\n        facebook_endpoint: [{\n          required: true,\n          message: 'Please enter your facebook function url',\n          trigger: 'blur'\n        }],\n        profile_endpoint: [{\n          required: true,\n          message: 'Please enter your profile function url',\n          trigger: 'blur'\n        }],\n        picture_endpoint: [{\n          required: true,\n          message: 'Please enter your picture function url',\n          trigger: 'blur'\n        }],\n        tasks_endpoint: [{\n          required: true,\n          message: 'Please enter your tasks function url',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: 'Please enter your email',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: 'Please input correct email address',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'Please enter your password',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: {\n    auth_endpoint: {\n      get: function get() {\n        return this.$store.state.auth_endpoint;\n      },\n      set: function set(value) {\n        this.form.auth_endpoint = value;\n        this.$store.commit('updateAuthEndpoint', value);\n      }\n    },\n    facebook_endpoint: {\n      get: function get() {\n        return this.$store.state.facebook_endpoint;\n      },\n      set: function set(value) {\n        this.form.facebook_endpoint = value;\n        this.$store.commit('updateFacebookEndpoint', value);\n      }\n    },\n    profile_endpoint: {\n      get: function get() {\n        return this.$store.state.profile_endpoint;\n      },\n      set: function set(value) {\n        this.form.profile_endpoint = value;\n        this.$store.commit('updateProfileEndpoint', value);\n      }\n    },\n    picture_endpoint: {\n      get: function get() {\n        return this.$store.state.picture_endpoint;\n      },\n      set: function set(value) {\n        this.form.picture_endpoint = value;\n        this.$store.commit('updatePictureEndpoint', value);\n      }\n    },\n    tasks_endpoint: {\n      get: function get() {\n        return this.$store.state.tasks_endpoint;\n      },\n      set: function set(value) {\n        this.form.tasks_endpoint = value;\n        this.$store.commit('updateTasksEndpoint', value);\n      }\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.form.auth_endpoint = this.auth_endpoint;\n    this.form.facebook_endpoint = this.facebook_endpoint;\n    this.form.profile_endpoint = this.profile_endpoint;\n    this.form.picture_endpoint = this.picture_endpoint;\n    this.form.tasks_endpoint = this.tasks_endpoint;\n\n    if ('code' in this.$route.query) {\n      this.$store.dispatch('signUpWithFacebook', {\n        code: this.$route.query.code,\n        redirect_uri: encodeURIComponent(window.location.origin + window.location.pathname)\n      }).then(function (response) {\n        _this.$store.commit('updateToken', response.data.token);\n\n        return _this.$store.dispatch('createProfile', {\n          email: response.data.email\n        });\n      }).then(function () {\n        _this.$router.push({\n          name: 'profile'\n        });\n      });\n    }\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      this.$refs['signUpForm'].validate(function (valid) {\n        if (valid) {\n          _this2.$store.dispatch('signUp', _this2.form).then(function () {\n            return _this2.$store.dispatch('signIn', _this2.form);\n          }).then(function (response) {\n            if ('error' in response.data) {\n              _this2.$notify.error({\n                title: 'SignIn Error',\n                message: response.data.error\n              });\n\n              return Promise.reject();\n            } else {\n              _this2.$store.commit('updateToken', response.data.token);\n\n              return _this2.$store.dispatch('createProfile', {\n                email: _this2.form.email,\n                city: _this2.form.city\n              });\n            }\n          }).then(function () {\n            _this2.$router.push({\n              name: 'profile'\n            });\n          });\n        }\n      });\n    },\n    signUpWithFacebook: function signUpWithFacebook() {\n      var redirect_uri = encodeURIComponent(window.location.origin + window.location.pathname);\n      var url = 'https://www.facebook.com/v3.0/dialog/oauth?client_id=' + config.FACEBOOK_CLIENT_ID + '&redirect_uri=' + redirect_uri + '&scope=email';\n      window.location.href = url;\n    }\n  }\n};",{"version":3,"sources":["SignUpForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"sign-up\">\n    <el-form label-width=\"170px\" label-position=\"left\" ref=\"signUpForm\" :model=\"form\" :rules=\"rules\" @submit.native.prevent=\"submitForm()\">\n      <el-form-item label=\"Auth URL\" prop=\"auth_endpoint\">\n        <el-input placeholder=\"Auth function URL\" type=\"text\" v-model=\"auth_endpoint\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Facebook Auth URL\" prop=\"facebook_endpoint\">\n        <el-input placeholder=\"Facebook function URL\" type=\"text\" v-model=\"facebook_endpoint\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Profile Function URL\" prop=\"profile_endpoint\">\n        <el-input placeholder=\"Profile management URL\" type=\"text\" v-model=\"profile_endpoint\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Picture Function URL\" prop=\"picture_endpoint\">\n        <el-input placeholder=\"Picture management URL\" type=\"text\" v-model=\"picture_endpoint\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Tasks Function URL\" prop=\"tasks_endpoint\">\n        <el-input placeholder=\"Tasks management URL\" type=\"text\" v-model=\"tasks_endpoint\"></el-input>\n      </el-form-item>\n\n      <div class=\"sw-form-actions sw-form-actions--facebook\">\n        <el-button type=\"primary\" plain @click.prevent=\"signUpWithFacebook\">Sign Up With Facebook</el-button>\n      </div>\n\n      <el-form-item label=\"Your email\" prop=\"email\">\n        <el-input placeholder=\"Email\" type=\"email\" v-model=\"form.email\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"City\" prop=\"city\">\n        <el-input placeholder=\"City\" type=\"text\" v-model=\"form.city\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Password\" prop=\"password\">\n        <el-input placeholder=\"Password\" type=\"password\" v-model=\"form.password\"></el-input>\n      </el-form-item>\n      \n      <div class=\"sw-form-actions\">\n        <button type=\"submit\" style=\"display: none\"></button>\n        <el-button type=\"primary\" @click=\"submitForm\">Sign Up</el-button>\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as config from '@/config'\n\nexport default {\n  data () {\n    return {\n      form: {\n        auth_endpoint: null,\n        facebook_endpoint: null,\n        profile_endpoint: null,\n        picture_endpoint: null,\n        tasks_endpoint: null,\n        email: null,\n        city: null,\n        password: null\n      },\n\n      rules: {\n        auth_endpoint: [\n          { required: true, message: 'Please enter your auth url', trigger: 'blur' }\n        ],\n        facebook_endpoint: [\n          { required: true, message: 'Please enter your facebook function url', trigger: 'blur' }\n        ],\n        profile_endpoint: [\n          { required: true, message: 'Please enter your profile function url', trigger: 'blur' }\n        ],\n        picture_endpoint: [\n          { required: true, message: 'Please enter your picture function url', trigger: 'blur' }\n        ],\n        tasks_endpoint: [\n          { required: true, message: 'Please enter your tasks function url', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: 'Please enter your email', trigger: 'blur' },\n          { type: 'email', message: 'Please input correct email address', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'Please enter your password', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n  computed: {\n    auth_endpoint: {\n      get () {\n        return this.$store.state.auth_endpoint\n      },\n      set (value) {\n        this.form.auth_endpoint = value\n        this.$store.commit('updateAuthEndpoint', value)\n      }\n    },\n\n    facebook_endpoint: {\n      get () {\n        return this.$store.state.facebook_endpoint\n      },\n      set (value) {\n        this.form.facebook_endpoint = value\n        this.$store.commit('updateFacebookEndpoint', value)\n      }\n    },\n\n    profile_endpoint: {\n      get () {\n        return this.$store.state.profile_endpoint\n      },\n      set (value) {\n        this.form.profile_endpoint = value\n        this.$store.commit('updateProfileEndpoint', value)\n      }\n    },\n\n    picture_endpoint: {\n      get () {\n        return this.$store.state.picture_endpoint\n      },\n      set (value) {\n        this.form.picture_endpoint = value\n        this.$store.commit('updatePictureEndpoint', value)\n      }\n    },\n\n    tasks_endpoint: {\n      get () {\n        return this.$store.state.tasks_endpoint\n      },\n      set (value) {\n        this.form.tasks_endpoint = value\n        this.$store.commit('updateTasksEndpoint', value)\n      }\n    }\n  },\n\n  created () {\n    this.form.auth_endpoint = this.auth_endpoint\n    this.form.facebook_endpoint = this.facebook_endpoint\n    this.form.profile_endpoint = this.profile_endpoint\n    this.form.picture_endpoint = this.picture_endpoint\n    this.form.tasks_endpoint = this.tasks_endpoint\n\n    if ('code' in this.$route.query) {\n      this.$store.dispatch('signUpWithFacebook', {\n        code: this.$route.query.code,\n        redirect_uri: encodeURIComponent(window.location.origin + window.location.pathname)\n      }).then(response => {\n        this.$store.commit('updateToken', response.data.token)\n        return this.$store.dispatch('createProfile', {\n          email: response.data.email\n        })\n      }).then(() => {\n        this.$router.push({ name: 'profile' })\n      })\n    }\n  },\n\n  methods: {\n    submitForm () {\n      this.$refs['signUpForm'].validate(valid => {\n        if (valid) {\n          this.$store.dispatch('signUp', this.form).then(() => {\n            return this.$store.dispatch('signIn', this.form)\n          }).then(response => {\n            if ('error' in response.data) {\n              this.$notify.error({\n                title: 'SignIn Error',\n                message: response.data.error\n              });\n\n              return Promise.reject()\n            } else {\n              this.$store.commit('updateToken', response.data.token)\n              return this.$store.dispatch('createProfile', {\n                email: this.form.email,\n                city: this.form.city\n              })\n            }\n          }).then(() => {\n            this.$router.push({ name: 'profile' })\n          })\n        }\n      })\n    },\n\n    signUpWithFacebook () {\n      const redirect_uri = encodeURIComponent(window.location.origin + window.location.pathname)\n      const url = 'https://www.facebook.com/v3.0/dialog/oauth?client_id=' + config.FACEBOOK_CLIENT_ID + '&redirect_uri=' + redirect_uri + '&scope=email'\n\n      window.location.href = url\n    }\n  }\n}\n</script>"],"sourceRoot":"src/components"}]}